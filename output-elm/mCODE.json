{"library":{"annotation":[{"translatorOptions":"","type":"CqlToElmInfo"},{"libraryId":"mCODE","libraryVersion":"1","startLine":270,"startChar":52,"endLine":270,"endChar":61,"message":"List-valued expression was demoted to a singleton.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"},{"libraryId":"mCODE","libraryVersion":"1","startLine":277,"startChar":44,"endLine":277,"endChar":48,"message":"List-valued expression was demoted to a singleton.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"},{"libraryId":"mCODE","libraryVersion":"1","startLine":283,"startChar":44,"endLine":283,"endChar":48,"message":"List-valued expression was demoted to a singleton.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"},{"libraryId":"mCODE","libraryVersion":"1","startLine":324,"startChar":3,"endLine":324,"endChar":19,"message":"Could not resolve membership operator for terminology target of the retrieve.","errorType":"semantic","errorSeverity":"warning","type":"CqlToElmError"}],"identifier":{"id":"mCODE","version":"1"},"schemaIdentifier":{"id":"urn:hl7-org:elm","version":"r1"},"usings":{"def":[{"localIdentifier":"System","uri":"urn:hl7-org:elm-types:r1"},{"localIdentifier":"FHIR","uri":"http://hl7.org/fhir","version":"4.0.0"}]},"includes":{"def":[{"localIdentifier":"FHIRHelpers","path":"FHIRHelpers","version":"4.0.0"}]},"codeSystems":{"def":[{"name":"SNOMEDCT","id":"http://snomed.info/sct","accessLevel":"Public"},{"name":"LOINC","id":"http://loinc.org","accessLevel":"Public"},{"name":"RXNORM","id":"http://www.nlm.nih.gov/research/umls/rxnorm","accessLevel":"Public"},{"name":"V20074","id":"http://terminology.hl7.org/CodeSystem/v2-0074","accessLevel":"Public"},{"name":"OBSCAT","id":"http://terminology.hl7.org/CodeSystem/observation-category","accessLevel":"Public"}]},"valueSets":{"def":[{"name":"Cancer Body Location Value Set","id":"mcode-cancer-body-location-vs","accessLevel":"Public"},{"name":"Cancer Disease Status Evidence Type Value Set","id":"mcode-cancer-disease-status-evidence-type-vs","accessLevel":"Public"},{"name":"Cancer Disorder Value Set","id":"mcode-cancer-disorder-vs","accessLevel":"Public"},{"name":"Cancer-Related Surgical Procedure Value Set","id":"mcode-cancer-related-surgical-procedure-vs","accessLevel":"Public"},{"name":"Cancer Staging System Value Set","id":"mcode-cancer-staging-system-vs","accessLevel":"Public"},{"name":"ClinVar Value Set","id":"mcode-clinvar-vs","accessLevel":"Public"},{"name":"Comorbid Condition Value Set","id":"mcode-comorbid-condition-vs","accessLevel":"Public"},{"name":"Condition Status Trend Value Set","id":"mcode-condition-status-trend-vs","accessLevel":"Public"},{"name":"Genetic Specimen Type Value Set","id":"mcode-genetic-specimen-type-vs","accessLevel":"Public"},{"name":"HUGO Gene Nomenclature Committee Gene Names Value Set","id":"mcode-hgnc-vs","accessLevel":"Public"},{"name":"Human Genome Variation Society Sequence Variant Nomenclature Value Set","id":"mcode-hgvs-vs","accessLevel":"Public"},{"name":"Histology Morphology Behavior Value Set","id":"mcode-histology-morphology-behavior-vs","accessLevel":"Public"},{"name":"Laterality Value Set","id":"mcode-laterality-vs","accessLevel":"Public"},{"name":"Primary or Uncertain Behavior Cancer Disorder Value Set","id":"mcode-primary-or-uncertain-behavior-cancer-disorder-vs","accessLevel":"Public"},{"name":"Radiation Procedure Value Set","id":"mcode-radiation-procedure-vs","accessLevel":"Public"},{"name":"Radiation Target Body Site Value Set","id":"mcode-radiation-target-body-site-vs","accessLevel":"Public"},{"name":"Secondary Cancer Disorder Value Set","id":"mcode-secondary-cancer-disorder-vs","accessLevel":"Public"},{"name":"TNM Distant Metastases Category Value Set","id":"mcode-tnm-distant-metastases-category-vs","accessLevel":"Public"},{"name":"TNM Primary Tumor Category Value Set","id":"mcode-tnm-primary-tumor-category-vs","accessLevel":"Public"},{"name":"TNM Regional Nodes Category Value Set","id":"mcode-tnm-regional-nodes-category-vs","accessLevel":"Public"},{"name":"TNM Stage Group Value Set","id":"mcode-tnm-stage-group-vs","accessLevel":"Public"},{"name":"Treatment Intent Value Set","id":"mcode-treatment-intent-vs","accessLevel":"Public"},{"name":"Treatment Termination Reason Value Set","id":"mcode-treatment-termination-reason-vs","accessLevel":"Public"},{"name":"TumorMarkerTestVS","id":"mcode-tumor-marker-test-vs","accessLevel":"Public"},{"name":"Units of Length Value Set","id":"mcode-units-of-length-vs","accessLevel":"Public"}]},"codes":{"def":[{"name":"CancerDiseaseStatus Code","id":"88040-1","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"CancerGeneticVariant Code","id":"69548-6","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"CancerGeneticVariant Gene Studied Code","id":"48018-6","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"CancerGenomicsReport Code","id":"81247-9","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"ECOGPerformanceStatus Code","id":"89247-1","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"ECOGPerformance Code","id":"89262-0","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"GenomicRegionStudied Code","id":"53041-0","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"KarnofskyPerformanceStatus Code","id":"89243-0","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMClinicalDistantMetastasesCategory Code","id":"21907-1","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMClinicalPrimaryTumorCategory Code","id":"21905-5","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMClinicalRegionalNodesCategory Code","id":"21906-3","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMClinicalStageGroup Code","id":"21908-9","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMPathologicalDistantMetastasesCategory Code","id":"21901-4","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMPathologicalPrimaryTumorCategory Code","id":"21899-0","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMPathologicalRegionalNodesCategory Code","id":"21900-6","accessLevel":"Public","codeSystem":{"name":"LOINC"}},{"name":"TNMPathologicalStageGroup Code","id":"21902-2","accessLevel":"Public","codeSystem":{"name":"LOINC"}}]},"statements":{"def":[{"name":"Patient","context":"Patient","expression":{"type":"SingletonFrom","operand":{"dataType":"{http://hl7.org/fhir}Patient","type":"Retrieve"}}},{"name":"CancerDiseaseStatus","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"CancerDiseaseStatus Code","type":"CodeRef"}}}},{"name":"CancerGenomicsReport","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}DiagnosticReport","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"CancerGenomicsReport Code","type":"CodeRef"}}}},{"name":"CancerRelatedRadiationProcedure","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Procedure","codeProperty":"code","type":"Retrieve","codes":{"name":"Radiation Procedure Value Set","type":"ValueSetRef"}}},{"name":"CancerRelatedSurgicalProcedure","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Procedure","codeProperty":"code","type":"Retrieve","codes":{"name":"Cancer-Related Surgical Procedure Value Set","type":"ValueSetRef"}}},{"name":"ComorbidCondition","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Condition","codeProperty":"code","type":"Retrieve","codes":{"name":"Comorbid Condition Value Set","type":"ValueSetRef"}}},{"name":"ECOGPerformanceStatus","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"ECOGPerformanceStatus Code","type":"CodeRef"}}}},{"name":"GeneticSpecimen","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Specimen","codeProperty":"type","type":"Retrieve","codes":{"name":"Genetic Specimen Type Value Set","type":"ValueSetRef"}}},{"name":"GenomicRegionStudied","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"GenomicRegionStudied Code","type":"CodeRef"}}}},{"name":"KarnofskyPerformanceStatus","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"KarnofskyPerformanceStatus Code","type":"CodeRef"}}}},{"name":"PrimaryCancerCondition","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Condition","codeProperty":"code","type":"Retrieve","codes":{"name":"Primary or Uncertain Behavior Cancer Disorder Value Set","type":"ValueSetRef"}}},{"name":"SecondaryCancerCondition","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Condition","codeProperty":"code","type":"Retrieve","codes":{"name":"Secondary Cancer Disorder Value Set","type":"ValueSetRef"}}},{"name":"TNMClinicalDistantMetastasesCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMClinicalDistantMetastasesCategory Code","type":"CodeRef"}}}},{"name":"TNMClinicalPrimaryTumorCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMClinicalPrimaryTumorCategory Code","type":"CodeRef"}}}},{"name":"TNMClinicalRegionalNodesCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMClinicalRegionalNodesCategory Code","type":"CodeRef"}}}},{"name":"TNMClinicalStageGroup","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMClinicalStageGroup Code","type":"CodeRef"}}}},{"name":"TNMPathologicalDistantMetastasesCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMPathologicalDistantMetastasesCategory Code","type":"CodeRef"}}}},{"name":"TNMPathologicalPrimaryTumorCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMPathologicalPrimaryTumorCategory Code","type":"CodeRef"}}}},{"name":"TNMPathologicalRegionalNodesCategory","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMPathologicalRegionalNodesCategory Code","type":"CodeRef"}}}},{"name":"TNMPathologicalStageGroup","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMPathologicalStageGroup Code","type":"CodeRef"}}}},{"name":"TumorMarker","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"name":"TumorMarkerTestVS","type":"ValueSetRef"}}},{"name":"Cancer Patient Date Of Birth","context":"Patient","accessLevel":"Public","expression":{"path":"birthDate","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}},{"name":"Cancer Patient Birth Sex","context":"Patient","accessLevel":"Public","expression":{"type":"Query","source":[{"alias":"E","expression":{"path":"extension","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"E","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex","type":"Literal"}]},"return":{"expression":{"path":"value","scope":"E","type":"Property"}}}},{"name":"Cancer Patient Current Addresses","context":"Patient","accessLevel":"Public","expression":{"type":"Query","source":[{"alias":"A","expression":{"path":"address","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}}],"relationship":[],"where":{"type":"Or","operand":[{"type":"Contains","operand":[{"name":"ToInterval","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"period","scope":"A","type":"Property"}]},{"type":"Now"}]},{"type":"IsNull","operand":{"path":"period","scope":"A","type":"Property"}}]}}},{"name":"Cancer Patient Race Codes","context":"Patient","accessLevel":"Public","expression":{"type":"Flatten","operand":{"type":"Query","source":[{"alias":"E","expression":{"path":"extension","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"E","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"http://hl7.org/fhir/us/core/StructureDefinition/us-core-race","type":"Literal"}]},"return":{"expression":{"type":"Query","source":[{"alias":"E2","expression":{"path":"extension","scope":"E","type":"Property"}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"E2","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"ombCategory","type":"Literal"}]},"return":{"expression":{"strict":false,"type":"As","operand":{"path":"value","scope":"E2","type":"Property"},"asTypeSpecifier":{"name":"{http://hl7.org/fhir}Coding","type":"NamedTypeSpecifier"}}}}}}}},{"name":"Cancer Patient Ethnicity Codes","context":"Patient","accessLevel":"Public","expression":{"type":"Flatten","operand":{"type":"Query","source":[{"alias":"E","expression":{"path":"extension","type":"Property","source":{"name":"Patient","type":"ExpressionRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"E","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity","type":"Literal"}]},"return":{"expression":{"type":"Query","source":[{"alias":"E2","expression":{"path":"extension","scope":"E","type":"Property"}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"E2","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"ombCategory","type":"Literal"}]},"return":{"expression":{"strict":false,"type":"As","operand":{"path":"value","scope":"E2","type":"Property"},"asTypeSpecifier":{"name":"{http://hl7.org/fhir}Coding","type":"NamedTypeSpecifier"}}}}}}}},{"name":"Most Recent ECOG Performance Status","context":"Patient","accessLevel":"Public","expression":{"type":"First","source":{"type":"Query","source":[{"alias":"K","expression":{"name":"ECOGPerformanceStatus","type":"ExpressionRef"}}],"relationship":[],"where":{"type":"In","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"status","scope":"K","type":"Property"}]},{"type":"List","element":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"final","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"amended","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"corrected","type":"Literal"}]}]},"sort":{"by":[{"direction":"desc","path":"effective","type":"ByColumn"}]}}}},{"name":"ECOG Performance Status Value","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"value","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Most Recent Karnofsky Performance Status","context":"Patient","accessLevel":"Public","expression":{"type":"First","source":{"type":"Query","source":[{"alias":"K","expression":{"name":"KarnofskyPerformanceStatus","type":"ExpressionRef"}}],"relationship":[],"where":{"type":"In","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"status","scope":"K","type":"Property"}]},{"type":"List","element":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"final","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"amended","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"corrected","type":"Literal"}]}]},"sort":{"by":[{"direction":"desc","path":"effective","type":"ByColumn"}]}}}},{"name":"Karnofsky Performance Status Value","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"value","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Body Sites","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"bodySite","type":"Property","source":{"name":"C","type":"OperandRef"}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Body Site Laterality","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"Laterality","expression":{"path":"extension","type":"Property","source":{"name":"B","type":"OperandRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"Laterality","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-location-qualifier","type":"Literal"}]},"return":{"expression":{"path":"value","scope":"Laterality","type":"Property"}}},"operand":[{"name":"B","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}CodeableConcept","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Clinical Status","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"clinicalStatus","type":"Property","source":{"name":"C","type":"OperandRef"}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Code","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"code","type":"Property","source":{"name":"C","type":"OperandRef"}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Date of Diagnosis","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"AssertedDate","expression":{"path":"extension","type":"Property","source":{"name":"C","type":"OperandRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"AssertedDate","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"http://hl7.org/fhir/StructureDefinition/condition-assertedDate","type":"Literal"}]},"return":{"expression":{"path":"value","scope":"AssertedDate","type":"Property"}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Histology Morphology Behavior","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"HMB","expression":{"path":"extension","type":"Property","source":{"name":"C","type":"OperandRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"path":"value","type":"Property","source":{"path":"url","scope":"HMB","type":"Property"}},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":" http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-histology-morphology-behavior","type":"Literal"}]},"return":{"expression":{"path":"value","scope":"HMB","type":"Property"}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Primary Cancer Condition Verification Status","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"verificationStatus","type":"Property","source":{"name":"C","type":"OperandRef"}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Is TNM Clinical Primary Tumor Category","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Equal","operand":[{"name":"ToConcept","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"code","type":"Property","source":{"name":"O","type":"OperandRef"}}]},{"type":"ToConcept","operand":{"name":"TNMClinicalPrimaryTumorCategory Code","type":"CodeRef"}}]},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"TNM Clinical Stage Groups","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"TNMClinicalStageGroup Code","type":"CodeRef"}}}},{"name":"Reference id","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"If","condition":{"asType":"{urn:hl7-org:elm-types:r1}Boolean","type":"As","operand":{"type":"StartsWith","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"reference","type":"Property","source":{"name":"ref","type":"OperandRef"}}]},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"urn:","type":"Literal"}]}},"then":{"type":"Last","source":{"type":"Split","stringToSplit":{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"reference","type":"Property","source":{"name":"ref","type":"OperandRef"}}]},"separator":{"valueType":"{urn:hl7-org:elm-types:r1}String","value":":","type":"Literal"}}},"else":{"type":"Last","source":{"type":"Split","stringToSplit":{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"reference","type":"Property","source":{"name":"ref","type":"OperandRef"}}]},"separator":{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"/","type":"Literal"}}}},"operand":[{"name":"ref","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Reference","type":"NamedTypeSpecifier"}}]},{"name":"Current TNM Clinical Stage Groups","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Flatten","operand":{"type":"Query","source":[{"alias":"Stage","expression":{"path":"stage","type":"Property","source":{"name":"C","type":"OperandRef"}}}],"relationship":[],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"assessment","scope":"Stage","type":"Property"}}},"return":{"expression":{"type":"Query","source":[{"alias":"StageGroup","expression":{"name":"TNM Clinical Stage Groups","type":"ExpressionRef"}}],"relationship":[],"where":{"type":"Equal","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"id","scope":"StageGroup","type":"Property"}]},{"name":"Reference id","type":"FunctionRef","operand":[{"type":"SingletonFrom","operand":{"path":"assessment","scope":"Stage","type":"Property"}}]}]}}}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"TNM Clinical Stage Group Categories","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Flatten","operand":{"type":"Query","source":[{"alias":"h","expression":{"path":"hasMember","type":"Property","source":{"name":"O","type":"OperandRef"}}}],"relationship":[],"return":{"expression":{"type":"Query","source":[{"alias":"member","expression":{"dataType":"{http://hl7.org/fhir}Observation","type":"Retrieve"}}],"relationship":[],"where":{"type":"Equal","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"id","scope":"member","type":"Property"}]},{"name":"Reference id","type":"FunctionRef","operand":[{"strict":false,"type":"As","operand":{"name":"h","type":"AliasRef"},"asTypeSpecifier":{"name":"{http://hl7.org/fhir}Reference","type":"NamedTypeSpecifier"}}]}]}}}}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Is TNM Clinical Stage Group","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Equal","operand":[{"name":"ToConcept","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"code","type":"Property","source":{"name":"O","type":"OperandRef"}}]},{"type":"ToConcept","operand":{"name":"TNMClinicalStageGroup Code","type":"CodeRef"}}]},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Current TNM Clinical Primary Tumor Categories","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"StageGroup","expression":{"name":"Current TNM Clinical Stage Groups","type":"FunctionRef","operand":[{"name":"C","type":"OperandRef"}]}}],"relationship":[],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"name":"StageGroup","type":"AliasRef"}}},"return":{"expression":{"type":"Query","source":[{"alias":"category","expression":{"name":"TNM Clinical Stage Group Categories","type":"FunctionRef","operand":[{"name":"StageGroup","type":"AliasRef"}]}}],"relationship":[],"where":{"type":"And","operand":[{"name":"Is TNM Clinical Stage Group","type":"FunctionRef","operand":[{"name":"category","type":"AliasRef"}]},{"type":"In","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"status","scope":"category","type":"Property"}]},{"type":"List","element":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"final","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"amended","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"corrected","type":"Literal"}]}]}]}}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Latest TNM Clinical Stage Group","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"First","source":{"type":"Query","source":[{"alias":"StageGroup","expression":{"dataType":"{http://hl7.org/fhir}Observation","type":"Retrieve"}}],"relationship":[],"where":{"type":"And","operand":[{"name":"Is TNM Clinical Stage Group","type":"FunctionRef","operand":[{"name":"StageGroup","type":"AliasRef"}]},{"type":"Equal","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"id","type":"Property","source":{"name":"C","type":"OperandRef"}}]},{"name":"Reference id","type":"FunctionRef","operand":[{"type":"SingletonFrom","operand":{"path":"focus","scope":"StageGroup","type":"Property"}}]}]}]},"sort":{"by":[{"direction":"desc","path":"effective","type":"ByColumn"}]}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Latest TNM Clinical Primary Tumor Categories","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"category","expression":{"name":"TNM Clinical Stage Group Categories","type":"FunctionRef","operand":[{"name":"Latest TNM Clinical Stage Group","type":"FunctionRef","operand":[{"name":"C","type":"OperandRef"}]}]}}],"relationship":[],"where":{"type":"And","operand":[{"name":"Is TNM Clinical Primary Tumor Category","type":"FunctionRef","operand":[{"name":"category","type":"AliasRef"}]},{"type":"In","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"status","scope":"category","type":"Property"}]},{"type":"List","element":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"final","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"amended","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"corrected","type":"Literal"}]}]}]}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Earliest TNM Clinical Stage Group","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"First","source":{"type":"Query","source":[{"alias":"StageGroup","expression":{"dataType":"{http://hl7.org/fhir}Observation","type":"Retrieve"}}],"relationship":[],"where":{"type":"And","operand":[{"name":"Is TNM Clinical Stage Group","type":"FunctionRef","operand":[{"name":"StageGroup","type":"AliasRef"}]},{"type":"Equal","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"id","type":"Property","source":{"name":"C","type":"OperandRef"}}]},{"name":"Reference id","type":"FunctionRef","operand":[{"type":"SingletonFrom","operand":{"path":"focus","scope":"StageGroup","type":"Property"}}]}]}]},"sort":{"by":[{"direction":"asc","path":"effective","type":"ByColumn"}]}}},"operand":[{"name":"C","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Condition","type":"NamedTypeSpecifier"}}]},{"name":"Cancer Genetic Variants","context":"Patient","accessLevel":"Public","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"CancerGeneticVariant Code","type":"CodeRef"}}}},{"name":"Is Cancer Genetic Variant","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Equal","operand":[{"name":"ToConcept","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"code","type":"Property","source":{"name":"O","type":"OperandRef"}}]},{"type":"ToConcept","operand":{"name":"CancerGeneticVariant Code","type":"CodeRef"}}]},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Filter Cancer Genetic Variants","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"O","expression":{"name":"Observations","type":"OperandRef"}}],"relationship":[],"where":{"name":"Is Cancer Genetic Variant","type":"FunctionRef","operand":[{"name":"O","type":"AliasRef"}]}},"operand":[{"name":"Observations","operandTypeSpecifier":{"type":"ListTypeSpecifier","elementType":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}}]},{"name":"Cancer Genetic Variant Data Value","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"value","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Cancer Genetic Variant Method","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"method","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Cancer Genetic Variant Gene Studied","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"c","expression":{"path":"component","type":"Property","source":{"name":"O","type":"OperandRef"}}}],"relationship":[],"where":{"type":"Equal","operand":[{"name":"ToConcept","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"code","scope":"c","type":"Property"}]},{"type":"ToConcept","operand":{"name":"CancerGeneticVariant Gene Studied Code","type":"CodeRef"}}]},"return":{"distinct":false,"expression":{"path":"value","scope":"c","type":"Property"}}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Tumor Markers By Value Set","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"type":"Query","source":[{"alias":"O","expression":{"dataType":"{http://hl7.org/fhir}Observation","codeProperty":"code","type":"Retrieve","codes":{"type":"ToList","operand":{"name":"VS","type":"OperandRef"}}}}],"relationship":[],"where":{"type":"In","operand":[{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"path":"status","scope":"O","type":"Property"}]},{"type":"List","element":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"final","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"amended","type":"Literal"},{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"corrected","type":"Literal"}]}]},"return":{"expression":{"type":"Query","source":[{"alias":"c","expression":{"path":"category","scope":"O","type":"Property"}}],"relationship":[],"where":{"type":"In","operand":[{"valueType":"{urn:hl7-org:elm-types:r1}String","value":"laboratory","type":"Literal"},{"type":"Query","source":[{"alias":"X","expression":{"type":"Query","source":[{"alias":"$this","expression":{"path":"coding","scope":"c","type":"Property"}}],"where":{"type":"Not","operand":{"type":"IsNull","operand":{"path":"code","type":"Property","source":{"name":"$this","type":"AliasRef"}}}},"return":{"expression":{"path":"code","type":"Property","source":{"name":"$this","type":"AliasRef"}}}}}],"return":{"distinct":false,"expression":{"name":"ToString","libraryName":"FHIRHelpers","type":"FunctionRef","operand":[{"name":"X","type":"AliasRef"}]}}}]},"return":{"expression":{"name":"O","type":"AliasRef"}}}}},"operand":[{"name":"VS","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}ValueSet","type":"NamedTypeSpecifier"}}]},{"name":"Tumor Marker Code","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"code","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]},{"name":"Tumor Marker Data Value","context":"Patient","accessLevel":"Public","type":"FunctionDef","expression":{"path":"value","type":"Property","source":{"name":"O","type":"OperandRef"}},"operand":[{"name":"O","operandTypeSpecifier":{"name":"{http://hl7.org/fhir}Observation","type":"NamedTypeSpecifier"}}]}]}}}